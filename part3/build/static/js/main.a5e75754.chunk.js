(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),a=t.n(o),r=t(15),u=t.n(r),s=(t(6),t(3)),i=function(e){var n=e.persons,t=e.deleteEntry;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("ul",{children:n.map((function(e,n){return Object(c.jsxs)("li",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},n)}))})})},d=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:e.addEntry,children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},l=function(e){var n=e.handleSearchInput,t=e.value;return Object(c.jsxs)(c.Fragment,{children:["Search: ",Object(c.jsx)("input",{value:t,onChange:n})]})},j=function(e){var n=e.message,t=!0===e.success?"success":"error";return null===n?null:Object(c.jsx)("div",{className:"notification "+t,children:n})},b=t(4),h=t.n(b),f="/api/persons",O=function(e){return h.a.post(f,e).then((function(e){return e.data}))},m=function(e){return h.a.delete("".concat(f,"/").concat(e))},p=function(e,n){return h.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},x=function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)(""),u=Object(s.a)(r,2),b=u[0],f=u[1],x=Object(o.useState)(""),g=Object(s.a)(x,2),v=g[0],w=g[1],C=Object(o.useState)(""),S=Object(s.a)(C,2),N=S[0],y=S[1],k=Object(o.useState)([]),E=Object(s.a)(k,2),L=E[0],F=E[1],I=Object(o.useState)(null),A=Object(s.a)(I,2),J=A[0],B=A[1],D=Object(o.useState)(!0),M=Object(s.a)(D,2),P=M[0],T=M[1],q=function(){h.a.get("api/persons").then((function(e){console.log(e),a(e.data)}))},z=function(e,n){T(n),B(e),setTimeout((function(){B(null)}),5e3)};return Object(o.useEffect)((function(){q()}),[]),Object(o.useEffect)((function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));F(""!==e?e:t)}),[N,t]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(j,{message:J,success:P}),Object(c.jsx)(l,{handleSearchInput:function(e){y(e.target.value)},value:N}),Object(c.jsx)("h2",{children:"Add new listing"}),Object(c.jsx)(d,{addEntry:function(e){e.preventDefault(),q();var n={name:b,number:v};if(t.map((function(e){return e.name.toLowerCase()})).includes(b.toLowerCase())){var c=t.find((function(e){return e.name.toLowerCase()===b.toLowerCase()})).id;window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))&&p(c,n).then((function(e){console.log(e),a(t.map((function(n){return n.id===c?e:n})))})).catch((function(e){console.log(e.response.data),z(e.response.data.error,!1)}))}else O(n).then((function(e){console.log(e),a(t.concat(e)),z("Added ".concat(b),!0)})).catch((function(e){console.log(e.response.data),z(e.response.data.error,!1)}));f(""),w("")},newName:b,newNumber:v,handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(i,{persons:L,deleteEntry:function(e){window.confirm("delete ".concat(e.name,"?"))&&m(e.id).then((function(n){console.log(n),a(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){console.log(n),z("".concat(e.name," has already been removed"),!1),a(t.filter((function(n){return n.id!==e.id})))}))}})]})};u.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root"))},6:function(e,n,t){}},[[38,1,2]]]);
//# sourceMappingURL=main.a5e75754.chunk.js.map